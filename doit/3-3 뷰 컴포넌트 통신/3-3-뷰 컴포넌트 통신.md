# 뷰 컴포넌트 통신
각각의 컴포넌트는 고유한 유효범위(scope)를 갖고 있어서 데이터 공유X

## 상·하위 컴포넌트 관계
뷰 프레임워크 자체에서 정의한 컴포넌트 데이터 전달 방식

### 상위 - 하위 컴포넌트란
트리 구조에서 부모 노드, 자식 노드처럼 컴포넌트 간의 관계가 부모, 자식으로 이루어진 컴포넌트.

지역, 전역 컴포넌트를 등록하면 등록된 컴포넌트는 자연스럽게 하위 컴포넌트가 된다.(자식 컴포넌트)

하위 컴포넌트를 등록한 인스턴스는 상위 컴포넌트가 된다.(부모 컴포넌트)

```
			 props 전달
상위 컴포넌트 ----------> 하위 컴포넌트
			 <----------
			 이벤트 발생
```

## 상위에서 하위 컴포넌트로 데이터 전달하기

### props 속성
props는 상위 컴포넌트에서 하위 컴포넌트로 데이터를 전달할 때 사용하는 속성.

```javascript
// 하위 컴포넌트의 props 속성 정의 방식
Vue.component('child-component', {
	props: ['props 속성 이름']
});
```

하위 컴포넌트에 props속성을 정의 후 상위 컴포넌트의 HTML 코드에 등록된 child-component 컴포넌트 태그에 v-bind속성 추가

```html
// 상위 컴포넌트의 HTML 코드
<child-component v-bind:props 속성 이름="상위 컴포넌트의 data 속성"></child-component>
```

```
						 props를 통해 데이터 전달
뷰 인스턴스(상위 컴포넌트) ----------------------> child-component(하위 컴포넌트)
```

## 하위에서 상위 컴포넌트로 이벤트 전달하기
이벤트를 발생시켜(event emit) 상위 컴포넌트에 신호를 보낸다.

### 이벤트 발생과 수신 형식
$emit()과 v-on:속성을 사용하여 구현

```javascript
// 이벤트 발생
this.$emit('이벤트명');

// 이벤트 수신
<child-component v-on:이벤트명="상위 컴포넌트의 메서드명"></child-component>
```
일반적으로 $emit을 호출하는 위치는 하위 컴포넌트의 특정 메서드 내부이므로 $emit을 호출할 때 사용하는 this는 하위 컴포넌트를 가리킨다.

## 같은 레벨의 컴포넌트 간 통신
뷰는 상위에서 하위로만 데이터를 전달해야 하는 기본적인 통신 규칙을 따르기 때문에 바로 옆 컴포넌트에 값을 전달하려면 하위에서 공통 상위 컴포넌트로 이벤트를 전달한 후 공통 상위 컴포넌트에서 2개의 하위 컴포넌트에 props를 내려 보내야 한다.

하지만 이런 통신 구조를 유지하다 보면 상위 컴포넌트가 필요 없음에도 불구하고 같은 레벨 간에 통신하기 위해 강제로 상위 컴포넌트를 두어야 함. 이를 해결하기 위해 이벤트 버스 사용.

## 관계 없는 컴포넌트 간 통신 - 이벤트 버스
개발자가 지정한 2개의 컴포넌트 간에 데이터를 주고받을 수 있는 방법

상위 - 하위 관계를 유지하고 있지 않아도 데이터를 한 컴포넌트에서 다른 컴포넌트로 전달 가능

### 이벤트 버스 형식
1. 애플리케이션 로직을 담는 인스턴스와는 별개로 새로운 인스턴스를 1개 더 생성
2. 새 인스턴스를 이용하여 이벤트를 보내고 받음
3. 보내는 컴포넌트에서 .$emit()을, 받는 컴포넌트에서는 .$on()을 구현

```javascript
// 이벤트 버스를 위한 추가 인스턴스 1개 생성
const eventBus = new Vue();

// 이벤트를 보내는 컴포넌트
methods: {
	메서드명: function() {
		eventBus.$emit('이벤트명', 데이터);
	}
}

// 이벤트를 받는 컴포넌트
methods: {
	created: function() {
		eventBus.$on('이벤트명', function(데이터) {
			...
		});
	}
}
```